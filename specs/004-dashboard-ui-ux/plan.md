# Implementation Plan: Dashboard UI/UX Redesign

**Branch**: `feature/004-dashboard-ui-ux` | **Date**: 2026-02-06 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/004-dashboard-ui-ux/spec.md`

## Summary

Redesign the dashboard UI/UX to match the prototype at even-artist-hub and add a release upload form for direct-to-fan commerce. Visual changes: migrate color system from pure black to blue-grey HSL, add a sticky DashboardHeader with avatar dropdown, redesign stat cards with trend indicators and staggered animations, add gradient fills to area charts, add card hover glow effects, update sidebar active states, and apply semantic badge styling. New functionality: release upload modal on the Releases page supporting Single and Album/EP types with industry metadata, USD pricing, exclusive/pre-sale/bundle toggles, artist notes, and a congratulations message on submit (demo mode, no persistence). All existing functionality (audio player, i18n, routing) is preserved.

## Technical Context

**Language/Version**: TypeScript 5.x with React 19.2.3 + Next.js 16.1.6
**Primary Dependencies**: shadcn/ui, Recharts, Lucide React, Motion (animation), next-intl v4.x, Tailwind v4
**Storage**: N/A (visual changes + mock form with no persistence)
**Testing**: Vitest (unit tests), ESLint (linting), Next.js build verification
**Target Platform**: Web (desktop + mobile responsive)
**Project Type**: Web application (Next.js App Router)
**Performance Goals**: Card hover transitions < 200ms, staggered animations < 600ms total, no layout shift
**Constraints**: Must preserve all existing i18n keys across 4 locales, must not break audio player, CSS-only hover effects (no JS animation for glow)
**Scale/Scope**: ~18 files modified, 3 new components (DashboardHeader, ReleaseUploadDialog, TrackListEditor), 1 redesigned component (SettingsPageClient), 4 locale files updated

## Constitution Check

_GATE: Must pass before Phase 0 research. Re-check after Phase 1 design._

No project constitution has been ratified. Default development guidelines from CLAUDE.md apply:

- All user-facing text must be i18n-aware (4 locales: en, es, fr, pt)
- Constants must use the categorized `src/lib/constants/` structure
- shadcn/ui primitives in `ui/core/` must not be modified
- Custom components go in `ui/customs/` by category
- Navigation must use `ROUTES` constants, branding must use `BRAND_NAME`
- Import from `@/lib/constants` barrel export

All gates pass. No violations.

## Project Structure

### Documentation (this feature)

```text
specs/004-dashboard-ui-ux/
├── plan.md              # This file
├── spec.md              # Feature specification
├── research.md          # Phase 0: Research decisions (R1-R8)
├── data-model.md        # Phase 1: Color token mapping, display attributes
├── quickstart.md        # Phase 1: Implementation order and key files
├── checklists/
│   └── requirements.md  # Spec quality validation
└── tasks.md             # Phase 2 output (generated by /speckit.tasks)
```

### Source Code (repository root)

```text
src/
├── app/
│   ├── [locale]/
│   │   ├── (dashboard)/
│   │   │   ├── layout.tsx           # Add DashboardHeader integration
│   │   │   ├── _components/
│   │   │   │   └── HomePageStreaming.tsx
│   │   │   ├── fans/
│   │   │   ├── releases/
│   │   │   │   └── _components/
│   │   │   │       └── ReleasesPageContent.tsx  # Add Release button
│   │   │   └── settings/
│   │   │       └── _components/
│   │   │           └── SettingsPageClient.tsx   # Redesigned settings
│   │   └── (landing)/               # Untouched
│   ├── globals.css                   # Color tokens, card-hover class
│   └── layout.tsx                    # Root layout (untouched)
├── components/
│   ├── layout/
│   │   ├── DashboardHeader.tsx       # NEW — Sticky top header bar
│   │   ├── Sidebar.tsx               # Updated active state styling
│   │   └── MobileBottomNav.tsx       # Untouched
│   ├── ui/
│   │   ├── core/                     # shadcn/ui primitives (untouched)
│   │   └── customs/
│   │       ├── cards/
│   │       │   ├── MetricCard.tsx    # Redesigned stat card layout
│   │       │   ├── ClientMetricCard.tsx  # Updated icon wrapper
│   │       │   └── ReleaseCard.tsx   # Semantic badge styling
│   │       ├── charts/
│   │       │   ├── RevenueChart.tsx  # Area chart + gradient fills
│   │       │   └── FanGrowthChart.tsx # Area chart + gradient fills
│   │       └── forms/
│   │           ├── ReleaseUploadDialog.tsx  # NEW — Release upload modal form
│   │           └── TrackListEditor.tsx      # NEW — Dynamic track list for albums
├── lib/
│   └── constants/
│       ├── theme.ts                  # DESIGN_TOKENS, STATUS_COLORS updates
│       └── charts.ts                 # Chart color values
└── ...

messages/
├── en.json                           # New header translation keys
├── es.json
├── fr.json
└── pt.json

__tests__/
├── components/
│   ├── RevenueChart.test.tsx         # Update for area chart changes
│   ├── ReleaseCard.test.tsx          # Update for badge styling changes
│   └── TopFans.test.tsx              # Verify no regressions
```

**Structure Decision**: This feature uses the existing Next.js web application structure. New components: `DashboardHeader.tsx` in `components/layout/`, and `ReleaseUploadDialog.tsx` + `TrackListEditor.tsx` in a new `components/ui/customs/forms/` directory (following the existing customs category pattern).

## Complexity Tracking

No constitution violations to justify. The release upload form adds new UI components but follows existing architecture patterns (customs/ folder, i18n namespace, Dialog modal on existing page — no new routes).

## Implementation Phases

### Phase 1: Color System Foundation

1. Update `src/app/globals.css` — migrate color tokens from oklch pure black to HSL blue-grey
2. Update `src/lib/constants/theme.ts` — update DESIGN_TOKENS and STATUS_COLORS
3. Add `card-hover` utility class to globals.css (golden glow on hover)
4. Add `--success` color token for semantic green
5. Verify all pages render with new color system

### Phase 2: Dashboard Header

1. Add shadcn DropdownMenu component if not present
2. Create `src/components/layout/DashboardHeader.tsx` — sticky header with brand logo, notification bell, avatar dropdown
3. Integrate header into dashboard layout
4. Add translation keys to all 4 locale files (en, es, fr, pt)

### Phase 3: Stat Cards

1. Redesign `MetricCard.tsx` — icon in muted circle, value, change badge with trend arrow
2. Update `ClientMetricCard.tsx` — updated icon wrapper styling
3. Add staggered entrance animation via Motion
4. Verify on overview page

### Phase 4: Charts

1. Refactor `RevenueChart.tsx` — convert to AreaChart with SVG linearGradient fills
2. Refactor `FanGrowthChart.tsx` — convert to AreaChart with gradient fills
3. Style tooltips, axes (dashed grid, formatted labels), and custom tooltip container
4. Verify responsiveness

### Phase 5: Navigation & Badges

1. Update `Sidebar.tsx` — active state with accent background + primary icon color
2. Update `ReleaseCard.tsx` — semantic badge styling (green tinted for live, gold for scheduled, etc.)
3. Update `STATUS_COLORS` in theme.ts if needed
4. Verify across all pages

### Phase 6: Release Upload Form

1. Add shadcn Dialog and Textarea components if not present
2. Create `src/components/ui/customs/forms/TrackListEditor.tsx` — dynamic track list with add/remove
3. Create `src/components/ui/customs/forms/ReleaseUploadDialog.tsx` — modal form with type toggle, metadata fields, commerce toggles, artist notes, validation, and congratulations message
4. Integrate "Add Release" button into Releases page (`ReleasesPageContent.tsx`)
5. Add translation keys (`ReleaseUpload` namespace) to all 4 locale files (en, es, fr, pt)

### Phase 7: Settings Page Redesign

1. Update translation keys in all 4 locale files — remove old Preferences keys, add Profile and Payout keys
2. Redesign `src/app/[locale]/(dashboard)/settings/_components/SettingsPageClient.tsx` — replace with 3 sections: Artist Profile (avatar, name, email, bio), Payout & Revenue (USD, payment method, bank info, earnings), Language
3. Add avatar upload preview using `URL.createObjectURL()`
4. Add inline success message on Save
5. Verify across all 4 locales

### Phase 8: Polish & Verification

1. Update unit tests for changed components
2. Run `npm test` — ensure no regressions
3. Run `npm run lint` — ensure no lint errors
4. Run `npm run build` — ensure production build succeeds
5. Visual verification across all pages and viewports

## Key Research Decisions

| ID  | Decision                                            | Rationale                                          |
| --- | --------------------------------------------------- | -------------------------------------------------- |
| R1  | HSL blue-grey base (220, 15%, 8%)                   | Matches prototype exactly, warmer than pure black  |
| R2  | CSS-only card hover glow                            | Performant, no JS animation needed for transitions |
| R3  | Recharts AreaChart + SVG gradients                  | Native support, no library change needed           |
| R4  | DashboardHeader above content area                  | Standard pattern, doesn't overlap sidebar          |
| R5  | MetricCard: icon circle + change badge              | Cleaner layout matching prototype                  |
| R6  | Semantic tinted badges                              | More subtle/premium than solid color badges        |
| R7  | Sidebar accent bg + primary icon                    | Clearer wayfinding, matches prototype              |
| R8  | New i18n keys for header                            | All UI text must be translatable per architecture  |
| R9  | Dialog modal for release upload                     | Stays in Releases page context, avoids new route   |
| R10 | Essential metadata only (genre, explicit, credits)  | Sufficient for demo, no ISRC/UPC complexity        |
| R11 | Exclusive + Pre-sale + Bundle toggles               | Core direct-to-fan commerce value proposition      |
| R12 | ReleaseUpload i18n namespace                        | All form text must be translatable                 |
| R13 | Settings: 3-card layout (Profile, Payout, Language) | Removes non-functional Preferences                 |
| R14 | Settings i18n restructure                           | Remove unused keys, add profile/payout keys        |

See [research.md](./research.md) for full details on each decision.
